@model TradableInstrumentsDataList
@using TradingApp.Models.InstrumentsMarketData

@using System.Collections.Generic

@{
    ViewData["Title"] = "Instruments management";
}
<div>
    <form asp-controller="Instrument" asp-action="Add" method="GET">
        <button type="submit" style="margin-top: 20px" class="btn btn-sm btn-success d-none d-md-inline-block">
            Add new instrument
        </button>
    </form>

    @if (Model.TradableInstrumentsList != null)
    {
        <h3>Instruments</h3>
        <div class="panel panel-default service-panel">
            <div class="panel-heading">@ViewData["Title"]</div>

            <table class="table table-hover">
                <thead>
                    <tr>
                        <td>Name</td>
                        <td>Description</td>
                        <td>Available From</td>
                        <td>Expiration Date</td>
                    </tr>
                </thead>
                @foreach (var item in Model.TradableInstrumentsList)
                {
                    <tr>

                        <td>@item.Name</td>
                        <td>@item.BidPrice</td>
                        <td>
                            <span class="timestamp">
                                <script type="text/javascript">
                                var entrydate = @item.AvailableFrom
                                document.write(entrydate.toLocaleDateString());
                                document.write(' at ');
                                document.write(entrydate.toLocaleTimeString());
                                </script>
                            </span>
                        </td>
                        <td>
                            <span class="timestamp">
                                <script type="text/javascript">
                                var entrydate = @item.ExpirationDate
                                document.write(entrydate.toLocaleDateString());
                                document.write(' at ');
                                document.write(entrydate.toLocaleTimeString());
                                </script>
                            </span>
                        </td>
                        <td>
                            <div class="in-line">
                                <form asp-controller="Instrument" asp-action="Edit" method="Get" asp-route-id="@item.InstrumentId">
                                    <button type="submit" class="btn btn-sm btn-warning">
                                        Trade
                                    </button>
                                </form>
                            </div>
                        </td>

                    </tr>

                }
            </table>

        </div>
    }
    else
    {
        <h3>No instruments</h3>
    }

</div>